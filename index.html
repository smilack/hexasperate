<!doctype html>
<html>
 <head>
  <title>Hexasperate</title>
  <link rel="stylesheet" href="/assets/style.css">
  <script type="text/javascript" src="/elm.js"></script>
 </head>
 <body>
  <div id="game"></div>
  <script type="text/javascript">
   var app = Elm.Main.init({ node: document.getElementById("game") });

   app.ports.saveOptions.subscribe(function(options) {
      localStorage.setItem("hexasperate-options", options);
   });

   var options = localStorage.getItem("hexasperate-options");

   if(options !== null) {
      try {
         app.ports.loadOptions.send(JSON.parse(options));
      } catch {
         console.error("Failed to parse saved options:", options);
      }
   }

   app.ports.saveTimes.subscribe(function(times) {
      localStorage.setItem("hexasperate-times", times);
   });

   var times = localStorage.getItem("hexasperate-times");

   if(times !== null) {
      try {
         app.ports.loadTimes.send(JSON.parse(times));
      } catch {
         console.error("Failed to parse saved times:", times);
      }
   }
  </script>
 </body>
</html>
